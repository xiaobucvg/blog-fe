!function(t){function e(e){for(var n,o,l=e[0],c=e[1],s=e[2],f=0,d=[];f<l.length;f++)o=l[f],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);for(u&&u(e);d.length;)d.shift()();return a.push.apply(a,s||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,l=1;l<i.length;l++){var c=i[l];0!==r[c]&&(n=!1)}n&&(a.splice(e--,1),t=o(o.s=i[0]))}return t}var n={},r={4:0},a=[];function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var s=0;s<l.length;s++)e(l[s]);var u=c;a.push([195,2,0,1]),i()}({195:function(t,e,i){"use strict";i.r(e);i(196),i(197),i(198),i(199),i(200);var n=i(165),r=i.n(n),a=(i(448),i(449),i(1)),o=i(2);const l={editor:{},articleId:-1,articleInfo:{},tmpArticle:{},init(){this.initEditor(),$("#tags").tagsinput(),this.articleId=a.a.getUrlParamter("id"),!isNaN(this.articleId)&&this.articleId>0&&o.a.getDetailArticle(this.articleId).then(t=>{this.articleInfo=t,this.showArticleInfo()}),this.bindEvent()},showArticleInfo(){$("#title_input").val(this.articleInfo.title),this.editor.setHtml(this.articleInfo.content),$("#tags").tagsinput("removeAll"),this.articleInfo.tags.forEach(t=>{$("#tags").tagsinput("add",t.name)}),$("#publish_btn").val("更新")},initEditor(){let t=this;t.editor=new r.a({el:document.querySelector("#editor"),initialEditType:"markdown",language:"zh_CN",hideModeSwitch:!0,height:600,useCommandShortcut:!0,useDefaultHTMLSanitizer:!0,usageStatistics:!1}),t.editor.addHook("addImageBlobHook",(function(){let e=$(".te-image-file-input").get(0).files[0],i=$(".te-alt-text-input").val().trim();o.a.postImg(e).then(e=>{t.editor.insertText("!["+i+"]("+e+")")})}))},bindEvent(){let t=this;$(document).on("click","#publish_btn",(function(){t.createArticleInfo(),t.validateData()&&(o.a.saveArticle(t.articleInfo).then(()=>{!isNaN(t.articleId)&&t.articleId>0?a.a.successTip("更新文章成功"):a.a.successTip("创建文章成功")}),window.localStorage.removeItem("article"))})),$("#save_btn").click((function(){}))},getAllTags(){let t=[];return $(".badge.badge.badge-info").each((function(){t.push($(this).text())})),t},validateData(){return!this.articleInfo.title||this.articleInfo.title.length>50?(a.a.errTip("文章标题不能为空，最多 50 个字"),!1):this.articleInfo.content?!(this.articleInfo.tags.length<1)||(a.a.errTip("文章标签至少需要一个"),!1):(a.a.errTip("文章内容不能为空"),!1)}};$((function(){l.init()}))},196:function(t,e,i){}});